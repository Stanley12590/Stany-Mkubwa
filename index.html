<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>STANY MIN TV | iOS 26</title>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase (Original Scripts Retained) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    
    <!-- Video Player -->
    <link href="https://unpkg.com/video.js@7.21.1/dist/video-js.min.css" rel="stylesheet">
    <script src="https://unpkg.com/video.js@7.21.1/dist/video.min.js"></script>

    <style>
        :root {
            --primary: #FF0000; /* Red */
            --bg: #000000;      /* Black */
            --text: #FFFFFF;    /* White */
            --glass: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.15);
            --blur: blur(25px);
        }

        * {
            margin: 0; padding: 0; box-sizing: border-box;
            font-family: 'Outfit', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: var(--bg);
            color: var(--text);
            overflow: hidden;
            height: 100vh;
        }

        /* iOS 26 High-End Splash Screen */
        #splash {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); z-index: 10000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .splash-logo {
            width: 100px; height: 100px;
            border: 5px solid var(--primary);
            border-radius: 25px;
            animation: pulse 2s infinite ease-in-out;
        }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,0,0,0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 30px rgba(255,0,0,0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,0,0,0); }
        }

        /* Ultimate Ad Engine */
        #ad-engine {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); z-index: 9000; display: none; flex-direction: column;
        }
        .ad-marquee {
            height: 35px; background: var(--primary); color: #000;
            font-weight: 800; display: flex; align-items: center; overflow: hidden;
            text-transform: uppercase; font-size: 12px;
        }
        .marquee-content {
            display: inline-block; white-space: nowrap; animation: marquee 15s linear infinite;
        }
        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        .ad-main { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; position: relative;}
        .ad-timer { position: absolute; top: 50px; right: 20px; font-weight: bold; background: var(--primary); padding: 5px 15px; border-radius: 20px;}
        .social-hub {
            display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px;
            background: var(--glass); padding: 20px; border-radius: 25px; border: 1px solid var(--glass-border);
        }
        .social-hub i { font-size: 24px; color: var(--text); cursor: pointer; }

        /* Bottom Navigation */
        .nav-bar {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; height: 70px; background: var(--glass);
            backdrop-filter: var(--blur); border: 1px solid var(--glass-border);
            border-radius: 35px; display: flex; justify-content: space-around;
            align-items: center; z-index: 1000; transition: 0.3s;
        }
        .nav-item { color: var(--text); opacity: 0.5; text-align: center; font-size: 10px; text-decoration: none;}
        .nav-item.active { opacity: 1; color: var(--primary); }
        .nav-item i { display: block; font-size: 22px; margin-bottom: 4px; }

        /* Layout & Pages */
        .page { 
            display: none; height: 100vh; overflow-y: auto; 
            padding: 20px; padding-top: 60px; padding-bottom: 110px;
        }
        .page.active { display: block; }
        .header { font-size: 32px; font-weight: 700; margin-bottom: 25px; color: var(--primary); }

        /* Card System (Glassmorphism) */
        .card {
            background: var(--glass); border: 1px solid var(--glass-border);
            border-radius: 25px; padding: 15px; margin-bottom: 20px;
            backdrop-filter: var(--blur); position: relative; overflow: hidden;
        }
        .card img { width: 100%; border-radius: 18px; margin-bottom: 12px; }
        .card-title { font-weight: 600; font-size: 18px; }

        /* Pro Reader (Stories & Tech) */
        .reader-header { height: 200px; border-radius: 25px; position: relative; overflow: hidden; margin-bottom: 20px;}
        .drop-image { position: absolute; width: 100%; height: 100%; object-fit: cover; opacity: 0.3; }
        .reader-info { position: absolute; bottom: 15px; left: 15px; }
        .btn-group { display: flex; justify-content: space-between; margin-top: 20px; }
        .btn-ios { 
            background: var(--primary); color: #fff; border: none; 
            padding: 12px 30px; border-radius: 15px; font-weight: bold; cursor: pointer;
        }

        /* Chat System */
        #chat-back { 
            position: fixed; top: 20px; right: 20px; background: var(--primary);
            width: 45px; height: 45px; border-radius: 50%; display: none;
            justify-content: center; align-items: center; z-index: 2000;
        }
        .chat-bubble { padding: 12px 18px; border-radius: 20px; margin-bottom: 10px; max-width: 80%; }
        .user-msg { background: var(--primary); align-self: flex-end; margin-left: auto; }
        .bot-msg { background: var(--glass); border: 1px solid var(--glass-border); }

        /* Security Age Gate */
        #age-gate {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); z-index: 11000; display: none;
            flex-direction: column; justify-content: center; align-items: center; text-align: center;
        }

        /* Float WhatsApp */
        .wa-float {
            position: fixed; bottom: 100px; right: 20px; background: #25D366;
            width: 55px; height: 55px; border-radius: 50%; display: flex;
            justify-content: center; align-items: center; font-size: 28px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); z-index: 900;
        }

    </style>
</head>
<body>

    <!-- Splash Screen -->
    <div id="splash">
        <div class="splash-logo"></div>
        <h1 style="margin-top: 25px; letter-spacing: 4px;">STANY MIN TV</h1>
        <p style="font-size: 12px; opacity: 0.5;">POWERED BY iOS 26 ENGINE</p>
    </div>

    <!-- Age Gate -->
    <div id="age-gate">
        <i class="fa-solid fa-circle-exclamation fa-4x" style="color:var(--primary)"></i>
        <h1 style="margin: 20px 0;">ADULT CONTENT</h1>
        <p style="padding: 0 40px; margin-bottom: 30px;">This section contains adult material. You must be 18 years or older to proceed.</p>
        <button class="btn-ios" onclick="verifyAge()">I am 18 or Older</button>
        <p style="margin-top: 20px; color: var(--primary);" onclick="nav('home')">Go Back Home</p>
    </div>

    <!-- Chat Back Arrow (iOS Style) -->
    <div id="chat-back" onclick="exitChat()">
        <i class="fa-solid fa-arrow-right"></i> <!-- Placed on top right as per instruction -->
    </div>

    <!-- Ad Engine Overlay -->
    <div id="ad-engine">
        <div class="ad-marquee"><div class="marquee-content" id="marquee-top"></div></div>
        <div class="ad-main">
            <div class="ad-timer" id="timer-label">Wait 10s</div>
            <div id="ad-content-box" style="width: 100%; text-align: center; margin-bottom: 30px;">
                <!-- Sponsor Ad Img or Video here -->
                <div class="card" style="height: 250px; display: flex; align-items: center; justify-content: center;">
                    <i class="fa-solid fa-rectangle-ad fa-5x" style="color: var(--primary);"></i>
                </div>
            </div>
            <div class="social-hub" id="sponsor-socials">
                <!-- 20+ icons dynamically generated -->
            </div>
            <button id="skip-btn" class="btn-ios" style="margin-top: 30px; opacity: 0.5;" disabled>Skip Ad</button>
        </div>
        <div class="ad-marquee"><div class="marquee-content" id="marquee-bottom"></div></div>
    </div>

    <!-- Main Pages -->
    <div id="home" class="page active">
        <div class="header">LIVE TV</div>
        <div id="live-grid">
            <!-- Channels Load Here -->
        </div>
    </div>

    <div id="movies" class="page">
        <div class="header">CINEMA</div>
        <div id="movie-grid"></div>
    </div>

    <div id="adult" class="page">
        <div class="header">ADULT (18+)</div>
        <div id="adult-grid"></div>
    </div>

    <div id="chat" class="page">
        <div class="header">COMMUNITY</div>
        <div id="chat-container" style="display: flex; flex-direction: column; height: 65vh;">
            <div id="messages" style="flex:1; overflow-y: auto; padding: 10px;"></div>
            <div style="display: flex; gap: 10px; background: var(--glass); padding: 10px; border-radius: 20px;">
                <input type="text" id="msg-input" placeholder="Type a message..." style="flex:1; background: transparent; border: none; color: white; outline: none;">
                <button onclick="sendMessage()" style="background: none; border: none; color: var(--primary); font-size: 20px;"><i class="fa-solid fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <div id="more" class="page">
        <div class="header">MORE</div>
        <div class="card" onclick="openStories()">
            <i class="fa-solid fa-book-open"></i> &nbsp; Stories (Simulizi)
        </div>
        <div class="card" onclick="openTech()">
            <i class="fa-solid fa-microchip"></i> &nbsp; Tech & Cybersecurity
        </div>
        <div class="card" onclick="nav('profile')">
            <i class="fa-solid fa-user-gear"></i> &nbsp; My Account
        </div>
    </div>

    <!-- Pro Reader Page (Hidden until clicked) -->
    <div id="reader" class="page">
        <div id="reader-view">
            <div class="reader-header">
                <img src="" class="drop-image" id="book-cover">
                <div class="reader-info">
                    <h2 id="book-title">Story Title</h2>
                    <p id="book-author" style="font-size: 12px; opacity: 0.7;">Author Name</p>
                    <span id="book-genre" style="background: var(--primary); font-size: 10px; padding: 2px 8px; border-radius: 10px;">Genre</span>
                </div>
            </div>
            <div id="reader-content" style="line-height: 1.8; text-align: justify; font-size: 16px;">
                <!-- Content here -->
            </div>
            <div class="btn-group">
                <button class="btn-ios" onclick="prevPage()"><i class="fa-solid fa-chevron-left"></i> Back</button>
                <button class="btn-ios" onclick="nextPage()">Next <i class="fa-solid fa-chevron-right"></i></button>
            </div>
        </div>
    </div>

    <!-- Bottom Nav -->
    <nav class="nav-bar" id="main-nav">
        <a onclick="nav('home')" class="nav-item active"><i class="fa-solid fa-house"></i>Live</a>
        <a onclick="nav('movies')" class="nav-item"><i class="fa-solid fa-clapperboard"></i>Movies</a>
        <a onclick="nav('adult')" class="nav-item"><i class="fa-solid fa-explicit"></i>18+</a>
        <a onclick="nav('chat')" class="nav-item"><i class="fa-solid fa-comments"></i>Chat</a>
        <a onclick="nav('more')" class="nav-item"><i class="fa-solid fa-grid-2"></i>More</a>
    </nav>

    <!-- Support Float -->
    <a href="https://wa.me/YOUR_NUMBER" class="wa-float" id="wa-float">
        <i class="fa-brands fa-whatsapp"></i>
    </a>

    <script>
        // CONFIG (As per your original code)
        const firebaseConfig = {
            apiKey: "AIzaSyABEnVaSOR5b1FL1V3-C13KoR9O7MqAoHg",
            authDomain: "studio-3650831122-2eea3.firebaseapp.com",
            databaseURL: "https://studio-3650831122-2eea3-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "studio-3650831122-2eea3",
            storageBucket: "studio-3650831122-2eea3.firebasestorage.app",
            messagingSenderId: "893787872699",
            appId: "1:893787872699:web:91268a1b8fb18b7bc4f89e"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        // 1. HWID Device Lock
        const deviceId = localStorage.getItem('did') || 'DEV-' + Math.random().toString(36).substr(2, 9).toUpperCase();
        localStorage.setItem('did', deviceId);

        // 2. Navigation Engine
        function nav(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            // Handle Bottom Nav visibility
            document.getElementById('main-nav').style.display = (pageId === 'chat') ? 'none' : 'flex';
            document.getElementById('chat-back').style.display = (pageId === 'chat') ? 'flex' : 'none';
            
            // ad trigger logic
            if(pageId !== 'chat') triggerAd();
        }

        function exitChat() { nav('home'); }

        // 3. Ultimate Ad Engine Logic
        let isPremium = false; // This would be fetched from Firebase

        function triggerAd() {
            if(isPremium) return;
            const engine = document.getElementById('ad-engine');
            const skipBtn = document.getElementById('skip-btn');
            const timerLabel = document.getElementById('timer-label');
            
            engine.style.display = 'flex';
            
            // Generate Social Hub Icons (20+)
            const hubs = document.getElementById('sponsor-socials');
            hubs.innerHTML = '';
            const platforms = ['whatsapp', 'telegram', 'youtube', 'facebook', 'instagram', 'twitter', 'tiktok', 'snapchat', 'linkedin', 'github', 'discord', 'twitch', 'pinterest', 'reddit', 'spotify', 'vimeo', 'dribbble', 'behance', 'slack', 'medium'];
            platforms.forEach(p => {
                hubs.innerHTML += `<i class="fa-brands fa-${p}" onclick="window.open('https://${p}.com')"></i>`;
            });

            // Set Marquee text
            const mText = "Sponsor: Stany Tech Hub • Limited Premium Offer • Exclusive Movie Access • Fast Streaming • 24/7 Support • ";
            document.getElementById('marquee-top').innerText = mText.repeat(5);
            document.getElementById('marquee-bottom').innerText = mText.repeat(5);

            let timeLeft = 10;
            const countdown = setInterval(() => {
                timeLeft--;
                timerLabel.innerText = `Wait ${timeLeft}s`;
                if(timeLeft <= 0) {
                    clearInterval(countdown);
                    skipBtn.disabled = false;
                    skipBtn.style.opacity = "1";
                    skipBtn.innerText = "Close Ad";
                }
            }, 1000);

            skipBtn.onclick = () => {
                engine.style.display = 'none';
                skipBtn.disabled = true;
                skipBtn.style.opacity = "0.5";
                timerLabel.innerText = "Wait 10s";
            };
        }

        // 4. Adult Guard
        function verifyAge() {
            document.getElementById('age-gate').style.display = 'none';
            nav('adult');
        }

        // 5. Pro Reader Separation
        function openStories() {
            document.getElementById('reader').classList.add('active');
            // Logic to load Stories from DB
            document.getElementById('book-title').innerText = "Vampire's Shadow";
            document.getElementById('book-genre').innerText = "Horror";
            document.getElementById('reader-content').innerHTML = "Part 1: The sun began to set behind the jagged mountains of Transylvania...";
        }

        // Startup
        window.onload = () => {
            setTimeout(() => {
                document.getElementById('splash').style.display = 'none';
                triggerAd();
            }, 3000);
        };

        // WhatsApp Dynamic Visibility
        window.onscroll = function() {
            const float = document.getElementById('wa-float');
            if (window.scrollY > 100) { float.style.display = "none"; } 
            else { float.style.display = "flex"; }
        };

        // RETAINED FROM ORIGINAL: Special Channel Map
        const specialMap = {
            "AZAM SPORTS 1":"SP1", "AZAM SPORTS 2":"SP2", "AZAM SPORTS 3":"SP3", "AZAM SPORTS 4":"SP4",
            "AZAM ONE HD":"AZ1", "AZAM TWO HD":"AZ2", "CHEKA PLUS":"CHK", "WASAFI":"WSF"
        };
    </script>
</body>
</html>
