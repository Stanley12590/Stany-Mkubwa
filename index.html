<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>STANY MIN TV | iOS 26</title>
    
    <!-- Professional Icons & Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Video Player (DRM Support) -->
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-database-compat.js"></script>

    <style>
        :root {
            --red: #FF0000;
            --black: #000000;
            --white: #FFFFFF;
            --glass: rgba(255, 255, 255, 0.08);
            --blur: blur(40px);
            --sent: #FF0000;
            --received: #1C1C1E;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'SF Pro Display', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--black); color: var(--white); overflow: hidden; height: 100vh; width: 100%; position: fixed; }

        /* --- iOS 26 Splash --- */
        #splash { position: fixed; inset: 0; background: var(--black); z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .logo-box { width: 90px; height: 90px; border: 4px solid var(--red); border-radius: 24px; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); box-shadow: 0 0 50px var(--red); } 100% { transform: scale(1); } }

        /* --- Auth Card --- */
        #auth-screen { position: fixed; inset: 0; background: var(--black); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .auth-card { background: var(--glass); backdrop-filter: var(--blur); padding: 35px; border-radius: 40px; width: 90%; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
        .ios-input { width: 100%; padding: 16px; margin-top: 15px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; color: white; outline: none; text-align: center; }
        .btn-red { background: var(--red); color: white; border: none; padding: 18px; border-radius: 30px; font-weight: 700; width: 100%; cursor: pointer; margin-top: 20px; }

        /* --- Ad Overlay (Unskippable) --- */
        #ad-overlay { position: fixed; inset: 0; background: var(--black); z-index: 9500; display: none; flex-direction: column; }
        .marquee-ad { background: var(--red); color: white; padding: 10px; font-weight: bold; overflow: hidden; font-size: 13px; }
        .marquee-ad span { display: inline-block; white-space: nowrap; animation: marquee 15s linear infinite; }
        @keyframes marquee { from { transform: translateX(100%); } to { transform: translateX(-100%); } }
        .ad-timer { position: absolute; top: 50px; right: 25px; border: 3px solid var(--red); width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; background: rgba(0,0,0,0.8); }
        .social-hub { display: grid; grid-template-columns: repeat(6, 1fr); gap: 15px; padding: 25px; background: var(--glass); backdrop-filter: var(--blur); }
        .social-hub i { font-size: 24px; color: white; text-align: center; cursor: pointer; }

        /* --- Header & Tabs --- */
        header { padding: 60px 20px 15px; background: rgba(0,0,0,0.8); backdrop-filter: var(--blur); position: sticky; top: 0; z-index: 800; display: flex; justify-content: space-between; align-items: center; }
        .logo-txt { font-size: 26px; font-weight: 800; letter-spacing: -1px; }

        .page { display: none; padding: 20px; padding-bottom: 120px; overflow-y: auto; height: 100vh; }
        .active-page { display: block; animation: ios-zoom 0.4s ease; }
        @keyframes ios-zoom { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        /* --- AZAM MAX STYLE CARDS --- */
        .section-title { font-weight: 700; color: var(--white); margin: 20px 0 12px; font-size: 18px; }
        
        /* Channel Card (Landscape 16:9) */
        .chan-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .chan-card { background: var(--card); border-radius: 12px; overflow: hidden; position: relative; aspect-ratio: 16/9; border: 1px solid var(--border); }
        .chan-card img { width: 100%; height: 100%; object-fit: cover; }
        .chan-card .overlay { position: absolute; bottom: 0; width: 100%; padding: 8px; background: linear-gradient(transparent, rgba(0,0,0,0.9)); font-size: 11px; font-weight: 700; }

        /* Movie Card (Portrait 2:3) */
        .mov-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .mov-card { background: var(--card); border-radius: 12px; overflow: hidden; aspect-ratio: 2/3; border: 1px solid var(--border); }
        .mov-card img { width: 100%; height: 100%; object-fit: cover; }

        /* --- Floating Navigation --- */
        .bottom-nav { position: fixed; bottom: 30px; left: 20px; right: 20px; height: 75px; background: rgba(20, 20, 20, 0.8); backdrop-filter: var(--blur); border-radius: 40px; display: flex; justify-content: space-around; align-items: center; border: 1px solid rgba(255,255,255,0.1); z-index: 1000; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .nav-item { text-align: center; color: #777; text-decoration: none; font-size: 10px; font-weight: 700; }
        .nav-item i { font-size: 24px; display: block; margin-bottom: 4px; }
        .nav-item.active { color: var(--red); }

        /* --- Simulizi Pro Reader --- */
        #reader { position: fixed; inset: 0; background: var(--black); z-index: 3000; display: none; }
        .drop-bg { position: fixed; inset: 0; background-size: cover; background-position: center; filter: blur(50px) brightness(0.2); z-index: -1; }
        .reader-scroll { padding: 60px 25px 120px; overflow-y: auto; height: 100vh; }
        .book-content { line-height: 1.9; font-size: 18px; color: #ddd; text-align: justify; background: rgba(0,0,0,0.4); padding: 20px; border-radius: 20px; }

        /* --- Chat Optimized --- */
        #chat-header { position: fixed; top: 0; width: 100%; padding: 60px 20px 15px; background: var(--black); display: none; justify-content: flex-end; z-index: 1100; }
        #chat-messages { height: calc(100vh - 180px); overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; padding-top: 100px; }
        .msg { padding: 12px 18px; border-radius: 22px; max-width: 80%; font-size: 15px; }
        .msg-sent { background: var(--sent); align-self: flex-end; border-bottom-right-radius: 4px; }
        .msg-received { background: var(--received); align-self: flex-start; border-bottom-left-radius: 4px; }
        .chat-input-area { position: fixed; bottom: 0; width: 100%; background: var(--black); padding: 10px 20px 40px; border-top: 1px solid var(--glass); display: flex; gap: 10px; }

        /* --- Slider --- */
        .carousel { display: flex; overflow-x: auto; scroll-snap-type: x mandatory; gap: 12px; margin-bottom: 20px; scrollbar-width: none; }
        .slide { min-width: 90%; height: 180px; border-radius: 20px; overflow: hidden; scroll-snap-align: center; position: relative; border: 1px solid var(--glass); }
        .slide img { width: 100%; height: 100%; object-fit: cover; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <!-- Splash Screen -->
    <div id="splash">
        <div class="logo-box"></div>
        <h1 style="margin-top:20px; font-weight: 800;">STANY <span style="color:var(--red)">MIN TV</span></h1>
    </div>

    <!-- HWID / Auth Lock -->
    <div id="auth-screen" class="hidden">
        <div class="auth-card" id="login-box">
            <h2>Sign In</h2>
            <input type="email" id="email" class="ios-input" placeholder="Email Address">
            <input type="password" id="pass" class="ios-input" placeholder="Password">
            <button class="btn-red" onclick="handleAuth()">LOGIN</button>
        </div>
    </div>

    <!-- Ad Overlay -->
    <div id="ad-overlay">
        <div class="marquee-ad"><span id="ad-marquee-top">• SPONSORED BY STANY MIN TV • VISIT OUR PARTNERS •</span></div>
        <div style="flex:1; display:flex; align-items:center; justify-content:center; position:relative;">
            <div class="ad-timer" id="ad-timer">15</div>
            <img id="ad-img" style="width:100%; max-height:75vh; object-fit:contain;">
        </div>
        <div id="ad-social" class="social-hub"></div>
        <div class="marquee-ad"><span id="ad-marquee-bottom">• UNSKIPPABLE AD • STANYMINTV.COM •</span></div>
    </div>

    <!-- Main Header -->
    <header id="main-header">
        <div class="logo-txt">STANY <span style="color:var(--red)">MIN</span></div>
        <i class="fa-solid fa-circle-user" style="font-size:24px" onclick="showP('profile')"></i>
    </header>

    <!-- Chat Header (Back Right) -->
    <div id="chat-header">
        <i class="fa-solid fa-arrow-right-from-bracket" style="font-size:26px; color:var(--red)" onclick="closeChat()"></i>
    </div>

    <main>
        <!-- Live TV (Azam Max Style) -->
        <section id="live" class="page active-page">
            <div class="carousel" id="live-slider"></div>
            <div class="section-title">Live Channels</div>
            <div class="chan-grid" id="chan-list"></div>
        </section>

        <!-- Cinema -->
        <section id="movies" class="page">
            <div class="carousel" id="movie-slider"></div>
            <div class="section-title">Latest Movies</div>
            <div class="mov-grid" id="mov-list"></div>
        </section>

        <!-- Adult 18+ -->
        <section id="adult" class="page">
            <div id="age-gate" class="card" style="text-align:center; padding:50px 20px;">
                <i class="fa-solid fa-circle-exclamation" style="font-size:50px; color:var(--red)"></i>
                <h2 style="margin:20px 0;">AGE VERIFICATION</h2>
                <p style="opacity:0.7">Confirm you are 18+ to enter.</p>
                <button class="btn-red" onclick="unlockAdult()">CONFIRM 18+</button>
            </div>
            <div id="adult-content" class="hidden">
                <div class="carousel" id="adult-slider"></div>
                <div class="mov-grid" id="adult-list"></div>
            </div>
        </section>

        <!-- Chat Support -->
        <section id="chat" class="page" style="padding:0">
            <div id="chat-messages"></div>
            <div class="chat-input-area">
                <input type="text" id="chat-in" class="ios-input" style="margin:0; border-radius:30px; text-align:left; padding-left:20px;" placeholder="Aa...">
                <button onclick="sendMsg()" style="background:var(--red); border:none; width:50px; height:50px; border-radius:50%; color:white"><i class="fa-solid fa-paper-plane"></i></button>
            </div>
        </section>

        <!-- More Services -->
        <section id="more" class="page">
            <div class="section-title">Account & More</div>
            <div class="card" onclick="openSimulizi()">Simulizi (Stories)</div>
            <div class="card" onclick="showP('updates')">Tech & Cybersecurity</div>
            <div class="card" onclick="showP('betting')">Betting Tips</div>
            <div class="card" onclick="openTokenModal()">Activate Premium Token</div>
            <div class="card" style="color:var(--red)" onclick="location.reload()">Sign Out</div>
            
            <!-- Simulizi List Container -->
            <div id="simulizi-list" class="hidden" style="margin-top:20px"></div>
        </section>
        
        <!-- Updates / Tech -->
        <section id="updates" class="page">
            <i class="fa-solid fa-chevron-left" style="font-size:24px" onclick="showP('more')"></i>
            <div class="section-title">Tech & Cybersecurity</div>
            <div id="tech-list"></div>
        </section>

        <!-- Betting -->
        <section id="betting" class="page">
            <i class="fa-solid fa-chevron-left" style="font-size:24px" onclick="showP('more')"></i>
            <div class="section-title">Daily Betting Tips</div>
            <div id="tip-list"></div>
        </section>
    </main>

    <!-- Simulizi Reader UI -->
    <div id="reader">
        <div class="drop-bg" id="read-bg"></div>
        <div class="reader-scroll">
            <i class="fa-solid fa-chevron-down" style="font-size:30px" onclick="closeReader()"></i>
            <h1 id="read-title" style="text-align:center; margin:30px 0; color:var(--red)"></h1>
            <div id="read-body" class="book-content"></div>
            <div style="display:flex; justify-content:space-between; margin-top:30px">
                <button class="btn-red" style="width:45%; background:#333" onclick="changePart(-1)">BACK</button>
                <button class="btn-red" style="width:45%" onclick="changePart(1)">NEXT</button>
            </div>
        </div>
    </div>

    <!-- Bottom Nav -->
    <nav class="bottom-nav" id="bot-nav">
        <a href="#" class="nav-item active" onclick="showP('live', this)"><i class="fa-solid fa-tv"></i>Live</a>
        <a href="#" class="nav-item" onclick="showP('movies', this)"><i class="fa-solid fa-film"></i>Movies</a>
        <a href="#" class="nav-item" onclick="showP('adult', this)"><i class="fa-solid fa-pepper-hot"></i>Adult</a>
        <a href="#" class="nav-item" onclick="showP('chat', this)"><i class="fa-solid fa-comments"></i>Chat</a>
        <a href="#" class="nav-item" onclick="showP('more', this)"><i class="fa-solid fa-grid-2"></i>More</a>
    </nav>

    <!-- Player Modal -->
    <div id="player-modal" class="hidden" style="position:fixed; inset:0; background:black; z-index:9999;">
        <i class="fa-solid fa-circle-xmark" style="position:absolute; top:50px; right:20px; z-index:10000; font-size:35px" onclick="stopPlayer()"></i>
        <video id="stany-player" class="video-js vjs-big-play-centered" controls style="width:100%; height:100%;"></video>
    </div>

    <!-- WhatsApp Support Float -->
    <a href="https://wa.me/255XXXXXXXXX" id="wa-float" style="position:fixed; bottom:120px; right:25px; background:#25D366; width:55px; height:55px; border-radius:50%; display:flex; align-items:center; justify-content:center; text-decoration:none; box-shadow:0 10px 20px rgba(0,0,0,0.4); z-index:900;">
        <i class="fa-brands fa-whatsapp" style="color:white; font-size:30px"></i>
    </a>

    <script>
        // --- FIREBASE CONFIG (STANYMINTV.COM) ---
        const firebaseConfig = {
            apiKey: "AIzaSyDiexD5WK9GLhQldr6zNmC8iYWc4em5eyM",
            authDomain: "stany-min-tv.firebaseapp.com",
            databaseURL: "https://stany-min-tv-default-rtdb.firebaseio.com",
            projectId: "stany-min-tv",
            storageBucket: "stany-min-tv.firebasestorage.app",
            messagingSenderId: "16513327552",
            appId: "1:16513327552:web:b4b2247053f83aa0b8e825",
            measurementId: "G-JM25LJXL5C"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database(), auth = firebase.auth();

        let isPremium = false, sData = null, sPart = 0, myHWID = localStorage.getItem('hwid') || 'HWID-'+Math.random().toString(36).substr(2,9);
        localStorage.setItem('hwid', myHWID);

        window.onload = () => {
            setTimeout(() => { document.getElementById('splash').style.display='none'; checkAuth(); }, 3000);
        };

        function checkAuth() {
            auth.onAuthStateChanged(user => {
                if(user) {
                    db.ref('users/'+user.uid).on('value', snap => {
                        const u = snap.val();
                        if(u && u.hwid && u.hwid !== myHWID) { alert("One Device Only! Locked."); auth.signOut(); location.reload(); }
                        else if(!u || !u.hwid) db.ref('users/'+user.uid).update({ hwid: myHWID, email: user.email, premium: false });
                        isPremium = u ? u.premium : false;
                        initApp();
                    });
                } else { document.getElementById('auth-screen').classList.remove('hidden'); }
            });
        }

        function handleAuth() {
            const e = document.getElementById('email').value, p = document.getElementById('pass').value;
            auth.signInWithEmailAndPassword(e, p).catch(err => alert(err.message));
        }

        // --- AD ENGINE ---
        function triggerAd(callback) {
            if(isPremium) return callback();
            const ov = document.getElementById('ad-overlay'); ov.style.display='flex';
            db.ref('ads/config').once('value', s => {
                const c = s.val(); 
                if(c) {
                    document.getElementById('ad-img').src = c.image;
                    document.getElementById('ad-marquee-top').innerText = c.marqueeTop;
                    document.getElementById('ad-marquee-bottom').innerText = c.marqueeBottom;
                    const hub = document.getElementById('ad-social'); hub.innerHTML = '';
                    if(c.social) c.social.forEach(i => hub.innerHTML += `<i class="${i.icon}" onclick="window.open('${i.url}')"></i>`);
                }
                let t = 15;
                const timer = setInterval(() => {
                    t--; document.getElementById('ad-timer').innerText = t;
                    if(t<=0) { clearInterval(timer); ov.style.display='none'; callback(); }
                }, 1000);
            });
        }

        // --- CORE LOADERS ---
        function initApp() {
            document.getElementById('auth-screen').classList.add('hidden');
            // Live Channels (Azam Max Landscape Style)
            db.ref('channels').on('value', s => {
                const list = document.getElementById('chan-list'); list.innerHTML = '';
                s.forEach(c => {
                    const d = c.val();
                    list.innerHTML += `<div class="chan-card" onclick="playMedia('${d.url}', '${d.licUrl}', '${d.token}')"><img src="${d.logo}"><div class="overlay">${d.name}</div></div>`;
                });
            });
            // Movies
            db.ref('movies').on('value', s => {
                const list = document.getElementById('mov-list'); list.innerHTML = '';
                s.forEach(c => list.innerHTML += `<div class="mov-card" onclick="playMedia('${c.val().url}')"><img src="${c.val().poster}"></div>`);
            });
            // Sliders
            ['live', 'movie', 'adult'].forEach(sec => {
                db.ref('carousels/'+sec).on('value', s => {
                    const slider = document.getElementById(sec+'-slider'); if(!slider) return; slider.innerHTML = '';
                    s.forEach(c => slider.innerHTML += `<div class="slide"><img src="${c.val().poster}"></div>`);
                });
            });
            // Posts
            db.ref('posts').on('value', s => {
                const tech = document.getElementById('tech-list'), tip = document.getElementById('tip-list');
                tech.innerHTML = ''; tip.innerHTML = '';
                s.forEach(c => {
                    const v = c.val();
                    const h = `<div class="card"><h4>${v.title}</h4><p style="opacity:0.7; font-size:12px; margin-top:5px;">${v.body}</p></div>`;
                    if(v.category === 'tech') tech.innerHTML += h; else tip.innerHTML += h;
                });
            });
        }

        // --- PLAYER ---
        let player = videojs('stany-player');
        function playMedia(url, lic, tok) {
            triggerAd(() => {
                document.getElementById('player-modal').classList.remove('hidden');
                let conf = { src: url, type: url.includes('.mpd')?'application/dash+xml':'application/x-mpegURL' };
                if(lic) conf.keySystems = { 'com.widevine.alpha': { url: lic, headers: { 'Authorization': tok ? 'Bearer '+tok : '' } } };
                player.src(conf); player.play();
            });
        }
        function stopPlayer() { player.pause(); document.getElementById('player-modal').classList.add('hidden'); }

        // --- SIMULIZI ---
        function openSimulizi() {
            const cont = document.getElementById('simulizi-list'); cont.classList.toggle('hidden');
            db.ref('simulizi').once('value', s => {
                cont.innerHTML = '';
                s.forEach(c => {
                    const v = c.val();
                    cont.innerHTML += `<div class="card" onclick="readStory('${c.key}')" style="display:flex; gap:15px; align-items:center;"><img src="${v.poster}" style="width:60px; height:85px; border-radius:10px;"><div><b>${v.title}</b><p style="font-size:11px; opacity:0.6;">By ${v.author} • ${v.genre}</p></div></div>`;
                });
            });
        }
        function readStory(id) {
            db.ref('simulizi/'+id).once('value', s => {
                sData = s.val(); sPart = 0;
                document.getElementById('read-title').innerText = sData.title;
                document.getElementById('read-bg').style.backgroundImage = `url('${sData.poster}')`;
                updateReader(); document.getElementById('reader').style.display='block';
            });
        }
        function updateReader() {
            const keys = Object.keys(sData.parts);
            const part = sData.parts[keys[sPart]];
            document.getElementById('read-body').innerHTML = `<h3>${part.title}</h3><p style="margin-top:15px">${part.content}</p>`;
        }
        function changePart(dir) {
            const keys = Object.keys(sData.parts);
            if(dir > 0 && sPart < keys.length - 1) sPart++;
            else if(dir < 0 && sPart > 0) sPart--;
            updateReader();
        }
        function closeReader() { document.getElementById('reader').style.display='none'; }

        // --- NAVIGATION ---
        function showP(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            document.getElementById(id).classList.add('active-page');
            if(el) {
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                el.classList.add('active');
            }
            const isChat = id === 'chat';
            document.getElementById('bot-nav').style.display = isChat ? 'none' : 'flex';
            document.getElementById('main-header').style.display = isChat ? 'none' : 'flex';
            document.getElementById('chat-header').style.display = isChat ? 'flex' : 'none';
        }
        function closeChat() { showP('live', document.querySelector('.nav-item')); }

        function unlockAdult() { document.getElementById('age-gate').classList.add('hidden'); document.getElementById('adult-content').classList.remove('hidden'); }
    </script>
</body>
</html>
